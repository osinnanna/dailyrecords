<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Book Keeping</title>
        <link rel="stylesheet" href="./style.css" />
        <script src="js/navbar.js"></script>
    </head>
    <body>
        <div id="navbar"></div>
        <main>
            <form onsubmit="submitForm(event)" method="post">
                <input
                    id="entryName"
                    type="text"
                    name="entryName"
                    placeholder="Enter an Entry"
                />
                <input
                    id="price"
                    type="text"
                    name="price"
                    placeholder="Enter a price"
                />
                <input type="submit" value="Submit" />
            </form>
        </main>
        <footer id="datetime"></header>

        <script>
            function updateDateTime() {
                const now = new Date();

                document.getElementById("datetime").textContent =
                    now.toLocaleString();
            }
            setInterval(updateDateTime, 1000);
            updateDateTime();
            async function submitForm(event) {
                event.preventDefault();
                const data = new FormData(event.currentTarget);
                const payload = Object.fromEntries(data.entries());

                console.log("Payload payload", payload);
                const response = await fetch("/insertEntry", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload),
                });

                let resultText = await response.text();

                console.log("The server returned: ", resultText);
                alert("Check console for response");
            }
        </script>
    </body>
</html>
